---
title: "Exercises"
author: "Julia MÃ¼ller & Kyla McConnell"
date: "1 2 2021"
output: html_document
---

# Lexical decision 

In a lexical decision task, you had participants listen to words in two conditions. In one condition, they were asked to assess whether the words were valid words of English. In the other, they were asked to assess whether the words were valid R package names. Some of your participants had just completed a full-day workshop on R and the tidyverse, but the others had not. 

1. Read in your data and take a look at the first 10 rows. What are the column names? What kind of information is in each column?
```{r}
ld <- read_csv("data/dgfs_lexdec.csv")

head(ld, n = 10)
```

2. Some of these columns should definitely be factors. Identify which columns contain grouping information and change the data type to factor.
```{r}
ld <- ld %>% 
  mutate(participant = as.factor(participant),
         order = as.factor(order),
         condA = as.factor(condA),
         condB = as.factor(condB),
         item_id = as.factor(item_id))
```

3. Look at summaries of the columns you changed above to answer the following questions: How many participants are included in this experiment? How many had attended the R workshop? How many items were included in each condition? 

```{r}
summary(ld$participant)

summary(ld$condA)

summary(ld$condB)

summary(ld$item_id)
```

4. The column names "condA" and "condB" are slightly confusing. Rename them so that "condA" is called "par_group" and "condB" is "word_cond". Make sure to save your output to use below!
```{r}
ld <- ld %>% 
  rename(par_group = condA,
         word_cond = condB)
```

5. The "row" column is in the final position, but generally, it might make more sense to have it as the first column. Move it to that position and save. 
```{r}
ld <- ld %>% 
  relocate(row)
```

6. Keep the word-level statistics together by moving the word_len column to right before the word column, and save. 
```{r}
ld <- ld %>% 
  relocate(word_len, .before = word)
```

7. Let's see what the longest and shortest response times were. Sort the dataframe by RT, first ascending, then descending, using arrange
```{r}
ld %>% 
  arrange(RT)

ld %>% 
  arrange(desc(RT))
```

8. What is the range of word lengths presented in this experiment? Select only the word_len column and pipe it to the `range()` command to show the minimum and maximum values.
```{r}
ld %>% 
  select(word_len) %>% 
  range()
```

9. The "row" column is really just a side effect of how the data was read in by your experimental control software. Go ahead and drop that column and save the result.
```{r}
ld <- ld %>% 
  select(-row)
```

10. Return some information about the words used here by selecting columns that contain "word".
```{r}
ld %>% 
  select(contains("word")) 
```

11. It seems hard to believe that participants could recognize either a word or a package name in under 250ms. Filter the dataset to permanently remove any rows with an RT under this threshold. Bonus: Run `nrow(ld)` both before and after filtering and report how many rows were removed. 
```{r}
nrow(ld)

ld <- ld %>% 
  filter(RT > 250)

nrow(ld)
```



At the moment this is just a dump of exercises I took out of the main doc!

# Functions and arguments
Call the `say()` function including the arguments what, by, and what_color. Try at least a few different options for each of these and find your favorite look. Try using "random" with the argument "by" or "catfact" or "fortune" with the argument "what".
```{r}

```


# Reading in
Read in the files you'll need for the exercises (in the exercises folder). Have a look at the data you read in. Is the separator recognised correctly? Are all variables the correct type? If not, convert them.

# Piping 

1. We tried piping catdog_spr to `head()` above. Try it now with `tail()`. What does this show you? 
```{r}

```

2. Pipe the 'catdog_spr' dataset to `colnames()` What does this command do? (Bonus, pipe the columnn names on to the `nchar()` function and figure out what that does.)
```{r}

```


# Fixing code errors

All of the following code snippets produce errors. What have I done wrong? Correct each snippet.

```{r}
party_invites <- c(Tracey, Karen, Sandra)
```

```{r}
1, 4, 5 + 1
```

```{r}
max(price) #from the ikea tibble
```

```{r}
ikea %>% 
  filter(item = "BILLY")
```

```{r}
ikea %>% 
  select(starts_with(item))
```

```{r}
ikea %>% 
  mutate(price * 2 = new_price)
```

```{r}
sumary(ikea)
```

```{r}
42 + "5"
```


# filter

2. Reading times lower than 150ms are pretty unusual and are sometimes removed from self-paced reading data. You decide that you want to remove these response times from your data. Filter out all RTs below 150ms from the spr dataset and save your result.
```{r}
nrow(spr)

spr <- spr %>% 
  filter(RT >= 150)

nrow(spr)
```

3. You want to take a look at the results from Par_C only: Filter these data points but don't save the result. 
```{r}
spr %>% 
  filter(participant == "Par_C")
```

4. You're not interested in the practice items in the spr dataframe. Filter the dataset to include everything BUT the practice items and save your result.
```{r}
spr <- spr %>% 
  filter(cond != "practice")
```


# If-else

1. Create a new column that shows whether or not the word is in the first half of a sentence. If the word number is less than or equal to 3, this new column should read 'first half', if not, it should read 'second half'.
```{r}
spr %>% 
  mutate(sentence_half = ifelse(word_num <= 3, "first half", "second half"))
```

2. Create a new column that has the part of speech for a word. If the word is in following list, it should be labeled "content", otherwise, it should be labeled "function": c("practice", "sentence", "relative", "clause.", "cats.")
```{r}
spr %>% 
  mutate(POS = ifelse(word %in% c("practice", "sentence", "relative", "clause.", "cats."), "content", "function"))
```

3. Create a new column that shows how fast a word was read. First, find the mean reading time over the entire dataset. You can do this in the console most easily using the base-R syntax `mean(spr$RT)`. If the RT is greater than or equal to this number, your new column should read "slow", otherwise, it should read "fast". 
```{r}
mean(spr$RT)

spr %>% 
  mutate(fastness = ifelse(RT >= mean(spr$RT), "slow", "fast"))
```

# Group by, summarise

1. Starting with the spr dataset, group by participant and use summarize to find the max RT for each participant. 
```{r}
spr %>% 
  group_by(participant) %>% 
  summarize(max(RT)) %>% 
  ungroup()
```

2. With the same dataset, group by condition and return the mean RT for each condition. This is already a first step towards statistical analysis of your data! Do conditions look like they have similar or very different means?
```{r}
spr %>% 
  group_by(cond) %>% 
  summarize(mean(RT)) %>% 
  ungroup()
```


3. Summarize based on condition and count how many full sentences are in each condition. (Here you will realize that this example dataset doesn't make a ton of sense :D)
```{r}
spr %>% 
  group_by(cond) %>% 
  count(full_sentence) %>% 
  ungroup()

spr %>% 
  count(full_sentence)
```

# Challenge questions / thinking tidyverse / chaining commands 

Thinking tidyverse: Now you have a lot of tidy tools that can all be combined or "chained".

See if you can figure out the following challenges. (Some may be a bit tricky, it's alright if you have to skip a couple or come back to them later.)

Penguins: 

1. Make a new column converting body mass to kg, then filter out all penguins under 6kg and save the result to a new tibble called "small_penguins".
```{r}

```

2. Which penguin species occur on Biscoe island? Filter first to include only this island, then return the distinct species that are found there. 
```{r}

```

3. Remember that the flipper_length column is represented in mm. Return how many penguins measured in this dataset had a flipper length longer than 2.5cm. Try to do this in one step, without having to permanently add the column to the dataframe (and without using 250cm)
```{r}

```


SPR: 
1. "Center" the response times around the average. This means take the mean RT and subtract it from every RT, so that 0 is now the average RT and the numbers reflect how much faster or slower the RT was from average. Save these centered RTs as a column called RT_c
```{r}

```

2. Create a new column that is called word_length and assign it to the number of characters in the word. Save the output.
```{r}

```

spr:
1. Return the most expensive bed.
```{r}

```

2. Count how many chairs are available in other colors.
```{r}

```


3. There is some junk in the designer column. Look at it using distinct(), then remove it with the following code: 

spr <- spr %>% 
  filter(!str_detect(designer, "[0-9]"))
  
Note: str_detect looks for regular expressions. Here, the regular expression [0-9] matches any number. If this is true, str_detect returns TRUE -- However, it is proceeded by ! which means NOT. Thus, the filter is satisfied only if str_detect returns FALSE, i.e. there are no numbers present.
  
Then, find which designer makes the most expensive furniture. Return the average price for each designer's products, and arrange them from largest to smallest. (Hint, give your summary column a name.)
```{r}

```


4. How many products did each designer design? You can use count, but can also just save this variable as a factor and look at a summary. 
```{r}

```

