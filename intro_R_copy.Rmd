---
title: "Intro to R"
author: "Kyla McConnell"
output: html_document
---

# Welcome to R!

Why should you learn R? 

It's...
- totally free!
- open-source, so is always being extended for all different types of applications.
- a scripting language, so you can share your analysis AND all the steps it took for you to get there, making your analysis reproducible and transparent.
- an established tool with tons of tutorials and help pages (try StackOverflow, Google, or YouTube)
- And it has an amazing and inclusive community (check out #rstats on Twitter and R-Ladies chapters around the world)


## Step One: Install R and R-Studio

R is a programming language that can be written directly into your computer's console/terminal. However, almost all users of R pair it with the program R-Studio, an integrated development environment (IDE) that offers a ton of features that will make your life much easier! 

Download R here (if in Germany): https://ftp.gwdg.de/pub/misc/cran/
Or select a closer location ("mirror") here to optimize performance: https://ftp.gwdg.de/pub/misc/cran/

Then download R-Studio (Desktop) here: https://rstudio.com/products/rstudio/download/

More installation info here if you have trouble: https://rstudio-education.github.io/hopr/starting.html

Mac users -- a program called XQuartz is needed for viewing some plots. This might not come up as a problem for you until later, but to be safe, you can also go ahead and install it now: https://www.xquartz.org/

Note: You must install both R AND R-Studio in order to use R-Studio for the rest of this tutorial. 

## Step Two: Check out R-Studio

R-Studio can make your R journey much easier! With R-Studio, you go from a programming language of text-only to a whole program, not too unlike Microsoft Word in comparison to text files. 

In general, you have four panels: 

Top-left: your scripting panel, in which you can write and save code. This may only open when you open a new file (File -> New File -> R Script / R-Markdown, we'll talk about the difference below)

Bottom-left: the console panel, for input/output that won't be saved.

Top-right: the environment panel, which generally can show you dataframes you are working with as well as other information you've saved to variables (and sometimes has other features too, depending on what you're working with)

Bottom-right: install and update packages, preview plots, read help files, and some other features

![R-Studio](img/rstudio_panels.png)
Image from https://ourcodingclub.github.io/tutorials/intro-to-r/

## Step Three: Open your first script

There are two types of file that you can use with R-Studio: a simple script, and a more feature rich R-Markdown document like this one. 

Both of these file types allow you to save code to continue working oni t, re-run it later, or have as a record of your analysis steps.

### R script (.R)

R scripts are the most simple files for saving your R code. They consist only of code.

To open a new script, select File -> New File -> R Script 

In this type of file, you write lines of code in the order they are meant to be run, and can run each line by clicking that line and pressing Control + R (on Windows) or Cmd + Enter (on Mac)

You can try out this type of script by typing some mathematical operations in the script and running those lines. The output will show below, in your console panel. 

All text in an R script is read as code. To leave comments for yourself or to indicate that a certain line shouldn't be run as code, use a hashtag (#) at the beginning of that line.

### R-Markdown file (.Rmd)

R-Markdown files are more complex files, that contain both code and text. They can also include images and some basic formatting.

To open a new R-Markdown file, select File -> New File -> R Markdown
This will open a pop-up where you can give your file a title (you can also change this later).

When you open a new R-Markdown file, you will be shown a basic template. You can see a header at the top, called the YAML information for that file. 

For example:
---
title: "Intro to R"
author: "Kyla McConnell"
date: "12/21/2020"
output: html_document
---

Changing this information will change what is displayed if you save the file to a final format, which is denoted in the "output" line. It's not super important for basic applications of R-Markdown but can be customized more for more advanced uses.

### How to use R-Markdown

If you type into general whitespace in a normal R-file, this will be interpreted as code. In R-Markdown, however, text in whitespace is interpreted as plain text. You can use this to keep notes for yourself when learning something, or leave a record of your decisions in an analysis. 

To add code to R-Markdown, you use code chunks that you can either type out (three backticks and {r} at the beginning and three backticks at the end) or add by clicking the "Insert" button in the top bar and selecting R.

```{r}

```

To run code in these blocks, click the green arrow at the top right corner of the box. The arrow with the green line under it will run all code blocks above the current one, but will not run the current block itself. 

The output of the code block will show directly below it (not in the console, like in a standard R script.) Often, this output will be proceeded by a number in brackets -- this just helps you keep track of how many numbers are output if they are on more than one line. Most of the time, you can safely ignore this.

### Try it out!

1. Open a new R-Markdown file 
2. Delete or adapt the template that is provided in the file
3. Add a new (R) code block and try some basic arithmetic. What happens if you have multiple lines of code in your code block? What happens if you chain together multiple operations? Try using different types of arithmetic symbols (+, - , * , / , ^)
Bonus: Can you figure out what the %% operator does (ex: 11 %% 2, 11 %% 3)

### Variables

One of the most fundamental parts of working in R is saving output to variables. This allows you to give a name or label to the output of some string of code. In R, you assign variables with the following syntax:

name_of_variable <- code

For example:

```{r}
fav_number <- 12

fav_number * 3
```

You can see that the code remembered that fav_number is actually 12. 

In R, you can have as many variables as you'd like.

```{r}
worst_number <- 7

difference <- fav_number - worst_number
```

If you just assign variables, you'll see no output. However, if you look in the Environment tab of your top right panel in R-Studio, you will see the values you have saved to variables. 

You can also call a variable by name to see what is saved in it.

```{r}
difference
```

Variables can also be used to create new variables, ex:
```{r}
double_number <- fav_number * 2
double_number
```


### Try it out

1. You are planning a pizza party and want to figure out how many pieces of pizza each of your guests can eat before the pizzas run out. Create a variable called "guests" and assign it to the number of guests you have at your party, 15. 
2. You order 5 pizzas. Assign the variable "pizzas" to the amount of pizzas you have. 3. Each pizza has 12 slices. Assign the variable "slices" to the amount of slices you have over all pizzas (hint: multiple the slices per pizza by the total number of pizzas -- you can use the pizzas variable here instead of retyping the number)
4. Divide your "slices" variable by your "guests" variable to figure out how many slices each person can have. 
5. 5 more people arrive to the party uninvited. Update your "guests" variable to the total number you have now. How many slices can each person have now?

```{r}
guests <- 15
pizzas <- 5
slices <- 12 * pizzas

slices/guests

guests <- guests + 5
slices/guests
```

### Data types

So far, we've been using numbers to show how variables work. In R, these are called *numeric*. You can check data types with the command `class()` 

There is also the type *integer*, which allows only whole numbers. You can force numbers into this form if it's needed with `as.integer()` -- this will truncate the decimal (cut it off), not round.

```{r}
class(8.8)

as.integer(8.8)
```

Another common data type is *character* -- this is text. Character variables should always be enclosed in either double or single quotation marks "/' Some operations won't work on strings, if they are expecting numeric. Check out the error here -- it may sound confusing but try to identify what it is telling you. 

```{r}
class("hello")

my_word <- "hello"

my_word + 2
```

A final common variable type is *logical*. This can be either TRUE or FALSE, nothing else. You can assess logical statements with:
test if something is identical with ==
test if something is not identical with !=
test if something is greater than with > or less than with <
or try greater than or equals to >= or less than or equal to with <=

```{r}
7 < 8

"dog" == "dogs"

8.8 >= 5.6

"seven" == 7

class("seven" == 7)
```

### Try it out

1. Assign your name to the variable "my_name". What data type is the variable?
2. Try the command `nchar()` on your name variable. What does it do?
3. What does nchar(my_name) >= 4 return? What does this mean?
Bonus: What does TRUE == 1 return? What about FALSE == 1? Try them both with 0 too. What does this tell you about how R deals with logical variables?

### Vectors

A special type of variable is the *vector*. Vectors contain multiple items of the same type and are enclosed in the syntax `c()`. For example:

```{r}
grocery_list <- c("apples", "bananas", "bread", "orange juice")

length(grocery_list)
```

You can also do "vector-wise" operations:
```{r}
my_numbers <- c(12, 14, 26, 57, 82)

my_numbers + 2

my_numbers + my_numbers
```

If you do a mathematical operation to a vector, it is broadcast to each item, i.e. it does each item separately. 

Similarly, if you add/subtract/multiply/divide a vector by another vector, it will match the items up one at a time in a loop.

You can also take a certain item from a vector using square brackets. For example, take the first item:

```{r}
my_numbers[1]
```

### Try it out

1. Make a variable called long_array and assign it the values 1, 1, 2, 2, 5, 10 (don't forget the `c()` syntax!)
2. Make a variable called short_array and assign it the values 1, 6, 10
3. Subtract short_array from long_array
4. Subtract long_array from short_array
5. Look at the output. What does this tell you about how R deals with vectors of different lengths?

```{r}
long_array <- c(1, 1, 2, 2, 5, 10)
short_array <- c(1, 6, 10)

long_array - short_array
short_array - long_array
```

### Loading and using packages
R has a lot of built-in functions, but most of them are basic operations. To do more advanced 

### Reading in dataframes / tibbles

If you are using R for data analysis, you generally have existing data you'd like to analyze. First, you have to know what type of file you're dealing with. 

If you work with your data in Excel or a similar program, you can go to File -> Save As and select either comma-separated values (csv) or tab-separated values (tsv). This will save the file in what is really a simple text format with either commas or tabs between the rows. These file formats are easiest to work with in R.

You will also need to know where the file is stored. If you are working in an R script, you will need to set a "working directory" -- that is, the location that R should start looking for files -- with `setwd()`. If you work in R-Markdown, R will automatically start looking in the folder that your R-Markdown file is saved in. If you data is in that folder, you can call it by name including the extension, ex: "experiment_data.csv" or "my_data.tsv". If it is within a folder that is inside of the folder your R-Markdown is in, you can include this: "data/my_data.tsv"

Once you know the file type you're working with and where it's saved, you can read it in using the base-R, i.e. built-in, methods of `read.csv()` and `read.tsv()`. However, I would recommend using the modified calls `read_csv()` and `read_tsv()` because there are some improvements. 





Be aware: Different system languages can affect csv files. Some languages will separate instead with semicolons (;), especially in languages that use a comma as a decimal separator (ex: 8,35)


